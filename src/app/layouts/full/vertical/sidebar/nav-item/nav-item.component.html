@if (item.navCap) {
  <div mat-subheader class="nav-caption">
    <i-tabler name="dots" class="icon-18 caption-icon"></i-tabler>
    <span class="caption-text">{{ item.navCap }}</span>
  </div>
} @if (!item.navCap && !item.external && !item.twoLines) {

<a mat-list-item (click)="onItemSelected(item)" class="menu-list-item"
  [ngClass]="{
    'mat-toolbar mat-primary activeMenu': isDirectlyActive(item),
    disabled: item.disabled
  }"
  [attr.aria-expanded]="ariaExpanded">
    <i-tabler class="routeIcon" name="{{ item.iconName }}" matListItemIcon></i-tabler>
    <span class="hide-menu">{{ item.displayName | translate }}</span>

    <div class="d-flex align-items-center gap-4" *ngIf="item.children?.length">
      @if (item.chip) {
        <span>
          <span class="{{ item.chipClass }} p-x-8 p-y-4 item-chip f-w-500 rounded-pill">
            {{ item.chipContent }}
          </span>
        </span>
      }
      <span class="arrow-icon" fxFlex>
        <span fxFlex></span>
        <mat-icon [@indicatorRotate]="expanded ? 'expanded' : 'collapsed'">
          expand_more
        </mat-icon>
      </span>
    </div>
  </a>
}

<!-- external Link (FIX: sin window.open en template) -->
@if (!item.navCap && item.external) {
  <a
    mat-list-item
    class="menu-list-item"
    [href]="item.externalUrl || 'https://google.com'"
    [attr.target]="item.target || '_blank'"
    rel="noopener"
  >
    <i-tabler class="routeIcon" name="{{ item.iconName }}" matListItemIcon></i-tabler>
    <span class="hide-menu">{{ item.displayName | translate }}</span>
  </a>
}

@if (expanded) {
  @for (child of item.children; track child) {
    <app-nav-item
      [item]="child"
      (click)="onSubItemSelected(child)"
      [depth]="depth + 1">
    </app-nav-item>
  }
}
